<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js内存释放</title>
</head>
<body>
<script type="text/javascript">
    // 堆内存
    //对象数据类型或者函数数据类型在定义的时候首先都会开辟一个堆内存，堆内存有一个引用地址，如果外面有变量知道这个地址，就可以内存被占用了，就不能被销毁了
    var obj1 ={}
    var obj2 =obj1;
    // 如果想让堆内存释放/销毁，只需要把所有引用他的变量赋值为null 即可，如果当前堆内存没有任何东西被占用，那么浏览器会在空闲的时候销毁回收
    obj1 = null;
    obj2 = null;

    // 栈内存
    // 1)全局作用域
    // 只有页面关闭的时候全局作用域才会销毁

    // 2)私有作用域（只有函数执行会产生私有作用域）
    // 一般情况下，函数执行会形成一个私有的作用域，当私有作用域的代码执行完成后，当前作用域都会主动释放和销毁
    // 特殊情况
    // 当前私有作用域里面的一部分内容被作用域以外的占用了,那么当前作用域不能销毁
    // a 、 函数执行返回一个引用数据类型值，并且在函数外面被一个其他的东西接受了，这种情况下一般形成的私有作用域都不能被销毁
    function fn() {
        var num = 100 ;
        return function () {
            num ++;
            console.log(num)
        }
    }
    var f = fn(); // fn 执行形成的私有作用域就不能被销毁
    // b 在一个私有作用域中给dom元素的事件绑定方法，一般情况下私有作用域不销毁

    //c、 属于不立即销毁 fn 返回的函数没有被其他的东西占用，但是还需要执行一次，所以暂时不销毁，当返回值执行完成后，浏览器会在空闲的时候销毁
    fn()(); // 执行fn 返回小函数的内存地址，然后接着小函数在执行

</script>
<h1>js内存释放</h1>
</body>
</html>